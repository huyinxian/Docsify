# STL

C++ STL（标准模板库）是一套功能强大的 C++ 模板类，提供了通用的模板类和函数，这些模板类和函数可以实现多种流行和常用的算法和数据结构，如向量、链表、队列、栈。

模板库有以下三个组件：

* 容器：用于管理某一类对象的集合，常用的有 list、vector、map 等。
* 算法：作用于容器，包括对容器进行排序、初始化、搜索、转换等操作。
* 迭代器：迭代器用于遍历容器内的元素。

## STL底层数据结构

---

### 数组

数组的优点为随机访问效率很高（可以使用 `[]` 运算符），适合存储需要经常进行访问的元素。

数组的缺点如下：

* 插入删除效率低（需要把元素往后移）
* 会浪费内存（数组申请的空间是连续的，如果没有规划好大小会造成浪费）

### 链表

常用的有单链表和双向链表。单链表只有一个指向下一节点的指针（next），而双向链表还会多一个指向上一节点的指针（prev）。

双向链表与单链表的比较：

* 在进行插入和删除时，双向链表可以原地进行，比单链表要快。
* 双向链表需要多存储一个指向上一节点的指针，比单链表占据的空间要大。
* 双向链表可以进行双向遍历，单链表只能向后遍历。

数组与链表的比较：

* 数组的存储空间为连续，而链表的存储空间为链式且可以动态扩展，在空间利用率上要远大于数组。
* 链表不支持随机访问（没有 `[]`）。

## vector

---

vector 是常用的容器，其底层数据结构为动态数组。vector 会随着元素的加入逐渐扩大空间，所以不用像数组那样一开始就申请一个很大的空间。

vector 的动态扩展并不是在原空间基础上增加，而是重新开辟一个原空间两倍大小的新空间，并把原空间的元素拷贝到新空间。完成拷贝后，原空间会被释放，因此指向原空间的迭代器会失效。

当向动态数组的开头和中间处进行插入删除操作时，需要把操作位置之后的元素全部往后移动。如果你的元素是结构体或者类，那么在移动的同时还会进行构造和析构，效率比较低（vecotr 中最好存类的指针，不要存实体）。另外，由于 vector 本身是数组，所以它访问任意元素的效率都为 O(1)。

vector 常用于存储需要经常进行随机访问的内容，并且不需要频繁对元素进行插入删除操作。

## list

---

list 的底层数据结构为双向链表，每次插入和删除元素时都会配置或释放一个空间，不会造成浪费。由于双向链表本身的特性，list 执行插入删除操作所花费的时间为常数级，效率非常高。但是，list 所用的双向链表是成环的，其随机访问效率很低，所以 list 没有提供 `[]` 运算符。

list 常用于存储需要频繁进行插入删除的对象，如果对象不大，最好用 vector 代替，特别是在存储指针的时候。
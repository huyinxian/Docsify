# 进程

## 进程与线程

---

进程：在操作系统中能够独立运行，并且作为资源分配的基本单位。它代表运行中的程序。

线程：属于进程中的一个实例，作为系统调度和分派的基本单位。线程是进程的一段序列，能够完成进程的一个功能。

二者的关系如下：

* 一个进程可以包含多个线程，一个进程至少有一个线程，一个线程只能存在一个进程中。
* 同一个进程下的线程可以共享该进程的资源。
* 进程结束后会销毁线程，一个线程结束不会影响其他线程
* 线程在执行时是同步和互斥的，因为他们共享同一个进程下的资源

## 进程间通信

---

首先，由 `fork` 创建出来的进程叫做子进程。该函数调用一次，但有两个返回值。子进程的返回值为 0，而父进程的返回值则是子进程的 id。对于子进程而言，之所以会返回 0 给它，是因为子进程可以通过 `getpid()` 来获取自己的 id。同时，它也可以调用 `getppid()` 来获取父进程的 id。

创建出来的子进程其实相当于父进程的副本，它们共享代码空间，但数据空间是独立的。子进程拥有父进程运行到当前的位置，如果不理解的话可以把它们当做两个一起运行的进程，在 `fork` 之后分别作用于不同的工作。所以，这种所谓的父子进程更像是兄弟关系。

### 管道

管道是一种半双工的通信方式，数据只能够单向流动，且只能够在有亲缘关系的进程之间通信（父子进程）。

### 命名管道

FIFO，也成为命名管道。命名管道也是半双工的通信方式，但是它允许无亲缘关系的进程进行通信。

### 消息队列

消息队列是消息的链表，存放在内核中。一个消息队列由一个标识符来标识。

### 信号

是一种较为复杂的通信机制，用于通知进程某个事件已发生。

### 信号量

信号量是一个计数器，可以用来控制多个进程对共享资源的访问。它常作为一种锁机制，防止多个进程同时访问一个资源。因此，信号量主要是作为进程间以及同一进程的不同线程之间的同步手段。

### 共享内存

共享内存就是映射一段能被其他进程访问的内存，这段内存由一个进程创建，但多个进程都可以访问。共享内存速度最快，通常和其他通讯方式进行结合，实现进程的同步和通信。

### 套接字

socket 可以用于不同机器之间的通信。
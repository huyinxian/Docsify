# 多态

C# 中的多态有静态多态性和动态多态性。静态多态性分为函数重载和运算符重载，而动态多态性则是在运行时响应的，主要靠的是 `virtual` 和 `abstract` 这两个关键字。

## 虚方法和抽象类

---

virtual 和 abstract 修饰的方法可以被子类重写。首先说明一下抽象类的规则：

* 不能创建抽象类实例。
* 不允许在抽象类外定义抽象方法。
* 不能把抽象类声明为 `sealed`（密封类，不允许继承）。
* 抽象类中可以声明普通方法、虚方法、非静态变量。

本质上来说，抽象类是为了让子类实现父类方法，因而抽象方法不允许实现，也不能够创建抽象类实例。抽象类的主要作用是规范，强制让子类实现对应的抽象方法。

然后再来说一说虚方法和抽象方法的区别：

* 虚方法必须要有实现（也就是至少要有一对大括号），抽象方法不允许实现。
* 虚方法可以被子类重写，抽象方法必须被子类重写。
* 抽象方法只能在抽象类中声明。

## 隐藏方法

---

当派生类中定义的某个方法和父类中的方法重名时，如果是想要覆盖掉父类方法，那么可以使用 `new` 关键字：

```csharp
// 覆盖掉父类方法
public new void Add()
{

}
```

隐藏方法即可以覆盖掉父类的虚方法，也可以覆盖掉父类的非虚方法。相比较于重写，隐藏方法中父类实例调用父类的方法，而子类实例调用子类的方法；重写的方法中子类实例调用子类的方法，而父类实例则要看该实例引用的是父类还是子类，引用哪个类就调用哪个类的方法（多态）。
# 字符串

## string的哪些方法会创建对象

---

现在有如下代码，请问代码中创建了几个对象？

```csharp
public string MakeString()
{
    string s = "abc";
    s = s + "de";
    s = s.substring(2, 4);
    s = s.toUpperCase();
    return s.toString();
}
```

首先看第一句，`"abc"` 是字符串常量，会专门存储在字符串常量区。如果字符串常量区已经有了这个字符串，那么 s 相当于直接对其引用，不会创建对象。再来看第二句，当使用 `+` 连接字符串时，`"de"` 会转换成 string 类型与 s 进行合并，因此这一条语句会创建一个对象。第三、四句都会生成一个新的对象返回，因此会创建两个对象。而第五句其实是直接返回 `this`，不会创建对象。总共创建了三个对象。

再来看下面的代码：

```csharp
string s = new string("abc");
```

先看第一句，如果 `"abc"` 已经在字符串常量区，那么就不会新建对象，而 new 则是会创建一个新对象返回给 s。
# 编译原理基础知识总结

## 编译流程

---

编译器就是把**源程序**编译成**目标机器代码**的程序。

编译流程可分为：词法分析、语法分析、语义分析、中间代码生成、代码优化、目标代码生成。

下面以代码 `1 + 2 + 3` 来进行分析。

### 词法分析

当代码从文件中输入到编译器时，就会进行词法分析。词法分析的主要任务是读取源程序的代码，并将它们组织成有意义的词素序列，然后转成语法单元进行输出。

    1 ADD 2 ADD 3

### 语法分析

这一步编译器会把词法分析的结果转换成 AST（抽象语法树），所有的操作数将会作为子节点，而所有的操作符将会作为父节点。

![](http://cdn.fantasticmiao.cn/image/post/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/%E8%AF%AD%E6%B3%95%E6%A0%91.png)

### 语义分析

语义分析会对语法树和符号表（记录变量名字的条目）进行检查，判断源程序是否符合语言定义的语义。同时，语义分析也会收集类型信息，并将其存储到语法树或符号表中，以便在中间代码生成时使用。语义分析的重要任务是**类型检查**，编译器会判断每个运算符是否有匹配的运算分量，类型不匹配时就会报错。另外，根据程序语言的设计不同，可能会允许进行自动类型转换。

### 中间代码生成

将一个源程序翻译为目标代码的过程中，可能会生成多个中间表示形式（比如语法树）。这种中间代码应该是易于生成的并且能够被快速翻译为目标机器语言。

### 代码优化

代码优化这一部分是可选的，主要目的是改进中间代码，以便生成更好的目标代码。代码优化可以分为中间代码优化和目标代码优化。

### 代码生成

代码生成会将中间代码翻译为目标语言。